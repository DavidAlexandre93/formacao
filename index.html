<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Certificados & Certifica√ß√µes - David Fernandes</title>
    <meta
      name="description"
      content="Portf√≥lio p√∫blico de certificados, diplomas e certifica√ß√µes com links de verifica√ß√£o."
    />
    <meta property="og:title" content="Certificados & Certifica√ß√µes - David Fernandes" />
    <meta property="og:description" content="Portf√≥lio p√∫blico com filtros, busca e verifica√ß√£o de credenciais." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="perfil.webp" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Certificados & Certifica√ß√µes - David Fernandes" />
    <meta name="twitter:description" content="Portf√≥lio p√∫blico com filtros, busca e verifica√ß√£o de credenciais." />
    <meta name="twitter:image" content="perfil.webp" />
    <link rel="icon" type="image/webp" href="perfil.webp" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data: https:; style-src 'self' 'unsafe-inline'; script-src 'self' https://cdn.jsdelivr.net 'unsafe-inline'; connect-src 'self'; font-src 'self' data:;"
    />
    <style>
      :root {
        --bg: #05070d;
        --bg-soft: #0e1220;
        --card: #121724;
        --text: #ecf1ff;
        --muted: #a8b4d1;
        --brand: #7c5cff;
        --brand-2: #08d8f2;
        --accent: #23d18b;
        --border: #2a3046;
        --chip: #1a2030;
        --shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
      }
      [data-theme="light"] {
        --bg: #f4f6fc;
        --bg-soft: #eef2ff;
        --card: #ffffff;
        --text: #0e1730;
        --muted: #5c657f;
        --brand: #694bff;
        --brand-2: #0284c7;
        --accent: #059669;
        --border: #dde3f0;
        --chip: #f1f5ff;
        --shadow: 0 14px 30px rgba(40, 50, 90, 0.12);
      }
      * { box-sizing: border-box; }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        color: var(--text);
        background:
          radial-gradient(circle at 10% -20%, rgba(124, 92, 255, 0.25), transparent 38%),
          radial-gradient(circle at 90% 0%, rgba(8, 216, 242, 0.2), transparent 38%),
          var(--bg);
        overflow-x: hidden;
      }
      .ambient {
        pointer-events: none;
        position: fixed;
        inset: 0;
        z-index: -1;
      }
      .scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        transform-origin: left center;
        transform: scaleX(0);
        background: linear-gradient(90deg, var(--brand), var(--brand-2), var(--accent));
        z-index: 99999;
      }
      .orb {
        position: absolute;
        border-radius: 999px;
        filter: blur(60px);
        opacity: 0.35;
      }
      .orb.one { width: 320px; height: 320px; left: 4%; top: 8%; background: #7c5cff; }
      .orb.two { width: 260px; height: 260px; right: 5%; top: 12%; background: #08d8f2; }
      .orb.three { width: 280px; height: 280px; right: 22%; bottom: -8%; background: #23d18b; }
      .container { max-width: 1160px; margin: 28px auto; padding: 0 20px; }
      .hero {
        position: relative;
        overflow: hidden;
        transform-style: preserve-3d;
        perspective: 800px;
        border: 1px solid var(--border);
        border-radius: 28px;
        background: linear-gradient(155deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
        box-shadow: var(--shadow);
        padding: 26px;
      }
      .hero-glow {
        position: absolute;
        width: 320px;
        height: 320px;
        border-radius: 50%;
        pointer-events: none;
        background: radial-gradient(circle, rgba(124, 92, 255, .26) 0%, rgba(8, 216, 242, .08) 45%, transparent 72%);
        filter: blur(6px);
        transform: translate(-50%, -50%);
        opacity: 0;
      }
      .hero::before {
        content: "";
        position: absolute;
        inset: -1px;
        border-radius: 28px;
        background: linear-gradient(120deg, rgba(124, 92, 255, .6), transparent, rgba(8, 216, 242, .55));
        opacity: .16;
        pointer-events: none;
      }
      header {
        display: flex;
        gap: 16px;
        align-items: flex-start;
        justify-content: space-between;
        flex-wrap: wrap;
      }
      .title { display: flex; align-items: center; gap: 14px; }
      .avatar {
        width: 140px;
        height: 140px;
        border-radius: 18px;
        object-fit: cover;
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        cursor: zoom-in;
      }
      h1 { font-size: 1.65rem; margin: 0; }
      .subtitle { margin: 6px 0 0 0; color: var(--muted); max-width: 52ch; }
      .toolbar { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
      .btn {
        height: 44px;
        padding: 0 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--chip);
        color: var(--text);
        cursor: pointer;
        font-weight: 700;
      }
      .btn.primary { background: linear-gradient(135deg, var(--brand), var(--brand-2)); color: #fff; border: 0; }
      .switch { display: inline-flex; align-items: center; gap: 4px; padding: 6px; border: 1px solid var(--border); background: var(--chip); border-radius: 999px; }
      .switch button { width: 40px; height: 40px; border: 0; background: transparent; border-radius: 999px; color: var(--text); cursor: pointer; }
      .switch button.active { background: var(--card); box-shadow: inset 0 0 0 1px var(--border); }
      .icon { width: 20px; height: 20px; display: block; }
      .icon path, .icon circle, .icon line { stroke: currentColor; fill: none; stroke-width: 2; }
      .icon.sun circle { fill: currentColor; }

      .stats {
        margin-top: 18px;
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 10px;
      }
      .stat {
        border: 1px solid var(--border);
        background: var(--chip);
        border-radius: 16px;
        padding: 12px;
      }
      .stat strong { display: block; font-size: 1.34rem; }
      .stat span { color: var(--muted); font-size: .85rem; }


      .filters {
        display: grid;
        grid-template-columns: 1fr 190px 180px auto;
        gap: 10px;
        margin: 18px 0 22px;
      }
      .input, select {
        height: 44px;
        padding: 0 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--card);
        color: var(--text);
      }
      .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
      .card {
        background: linear-gradient(155deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 18px;
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        gap: 12px;
        transform-style: preserve-3d;
        will-change: transform;
      }
      .card-head { display: flex; gap: 12px; align-items: start; justify-content: space-between; }
      .left { display: flex; gap: 12px; align-items: start; }
      .right { display: flex; gap: 10px; align-items: center; }
      .issuer { display: flex; align-items: center; gap: 10px; font-weight: 700; }
      .issuer img.logo { width: 26px; height: 26px; border-radius: 6px; border: 1px solid var(--border); object-fit: cover; }
      .badge { width: 84px; height: 84px; object-fit: contain; border-radius: 12px; background: var(--chip); border: 1px solid var(--border); }
      .titleCert { font-size: 1.02rem; margin: 0 0 2px; }
      .meta { color: var(--muted); font-size: .88rem; line-height: 1.35; }
      .chips { display: flex; flex-wrap: wrap; gap: 8px; }
      .chip { font-size: .74rem; padding: 6px 10px; border-radius: 999px; background: var(--chip); border: 1px solid var(--border); color: var(--muted); }
      .card-actions { display: flex; gap: 10px; flex-wrap: wrap; }
      .card-docs {
        margin: 4px 0 0;
        padding-left: 18px;
        color: var(--muted);
        font-size: .86rem;
      }
      .card-docs a { color: var(--brand-2); }
      .verify {
        padding: 9px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--chip);
        color: var(--text);
        font-weight: 700;
        text-decoration: none;
      }
      .verify.primary { background: linear-gradient(135deg, var(--brand), var(--brand-2)); color: #fff; border: 0; }
      .qr { width: 80px; height: 80px; border-radius: 10px; border: 1px solid var(--border); background: #fff; }
      .hidden { display: none !important; }
      footer { margin: 34px 0 20px; text-align: center; color: var(--muted); }

      #zoomOverlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(4, 8, 18, .78); z-index: 9999; padding: 20px; }
      #zoomOverlay.open { display: flex; }
      #zoomOverlay img { max-width: min(90vw, 740px); max-height: 90vh; border-radius: 16px; border: 1px solid var(--border); }

      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      @media (max-width: 980px) {
        .grid { grid-template-columns: repeat(2, 1fr); }
        .filters { grid-template-columns: 1fr 1fr; }
      }
      @media (max-width: 680px) {
        .grid { grid-template-columns: 1fr; }
        .stats { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
    </style>
  </head>
  <body>
    <div class="scroll-progress" id="scrollProgress" aria-hidden="true"></div>
    <div class="ambient" aria-hidden="true">
      <div class="orb one"></div>
      <div class="orb two"></div>
      <div class="orb three"></div>
    </div>

    <div class="container">
      <div class="hero">
        <div class="hero-glow" id="heroGlow"></div>
        <header>
          <div class="title">
            <img
              class="avatar"
              id="avatarImg"
              src="perfil.webp"
              loading="eager"
              decoding="async"
              fetchpriority="high"
              alt="Foto de perfil de David Fernandes"
              tabindex="0"
            />
            <div>
              <h1>David Fernandes ‚Äî Certificados & Certifica√ß√µes</h1>
              <p class="subtitle">Portf√≥lio verific√°vel com microintera√ß√µes avan√ßadas em Motion + GSAP, focado em uma experi√™ncia fluida e realista.</p>
            </div>
          </div>
          <div class="toolbar">
            <div class="switch" role="group" aria-label="Tema">
              <button id="btnLight" aria-label="Claro" title="Claro" aria-pressed="false">
                <svg class="icon sun" viewBox="0 0 24 24" aria-hidden="true">
                  <circle cx="12" cy="12" r="4"></circle>
                  <line x1="12" y1="2" x2="12" y2="5"></line>
                  <line x1="12" y1="19" x2="12" y2="22"></line>
                  <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"></line>
                  <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"></line>
                  <line x1="2" y1="12" x2="5" y2="12"></line>
                  <line x1="19" y1="12" x2="22" y2="12"></line>
                  <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"></line>
                  <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"></line>
                </svg>
              </button>
              <button id="btnDark" class="active" aria-label="Escuro" title="Escuro" aria-pressed="true">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
              </button>
            </div>
            <button id="btnPrint" class="btn">üñ®Ô∏è Exportar PDF</button>
            <a class="btn primary" id="btnLinkedIn" href="#" target="_blank" rel="noopener">üîó LinkedIn</a>
          </div>
        </header>

        <section class="stats" id="statsPanel" aria-label="M√©tricas"></section>
      </div>


      <section class="filters" aria-label="Filtros">
        <label class="sr-only" for="search">Buscar por t√≠tulo, emissor e habilidade</label>
        <input id="search" class="input" placeholder="Buscar por t√≠tulo, emissor, habilidade‚Ä¶" />
        <label class="sr-only" for="filterCategory">Filtrar por categoria</label>
        <select id="filterCategory">
          <option value="">Categoria: todas</option>
          <option>Certifica√ß√µes</option>
          <option>Gradua√ß√µes</option>
          <option>MBA</option>
          <option>P√≥s-Gradua√ß√£o</option>
        </select>
        <label class="sr-only" for="filterIssuer">Filtrar por emissor</label>
        <select id="filterIssuer"><option value="">Emissor: todos</option></select>
        <label class="sr-only" for="sortBy">Ordena√ß√£o</label>
        <select id="sortBy">
          <option value="dateDesc">Mais recentes</option>
          <option value="dateAsc">Mais antigos</option>
          <option value="titleAsc">T√≠tulo A‚ÜíZ</option>
        </select>
      </section>

      <section id="grid" class="grid" aria-live="polite"></section>

      <footer>Constru√≠do em HTML/CSS/JS com anima√ß√µes Motion + GSAP e pronto para GitHub Pages.</footer>
    </div>

    <div id="zoomOverlay" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Foto ampliada de perfil" tabindex="-1">
      <img src="perfil.webp" alt="Foto ampliada de David Fernandes" />
    </div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script type="module">
      import { animate, stagger, spring } from "https://cdn.jsdelivr.net/npm/motion@11.11.13/+esm";

      const CERTS = [
        { id: "CERT-AZ-900", title: "Microsoft Certified: Conceitos b√°sicos do Azure", issuer: "Microsoft", category: "Certifica√ß√µes", issueDate: "2025-11", expireDate: "", verifyUrl: "https://www.credly.com/badges/SEU-ID", badgeUrl: "", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg", skills: ["AZ-900", "Cloud", "Fundamentals"], docs: [
          { label: "Documento da certifica√ß√£o", url: "https://www.credly.com/badges/SEU-ID" }
        ] },
        { id: "GRAD-CC-USJT", title: "Bacharelado em Ci√™ncia da Computa√ß√£o", issuer: "Universidade S√£o Judas", category: "Gradua√ß√µes", issueDate: "2024-02", expireDate: "", verifyUrl: "https://diplomadigital.usjt.br/?codigo=203.203.6fb7ca2c25ea", badgeUrl: "", logoUrl: "", skills: ["Bacharelado", "Computa√ß√£o"], docs: [
          { label: "Diploma digital (frente)", url: "https://diplomadigital.usjt.br/?codigo=203.203.6fb7ca2c25ea" },
          { label: "Diploma digital (verso)", url: "https://diplomadigital.usjt.br/?codigo=203.203.6fb7ca2c25ea" }
        ] },
        { id: "MBA-FBR-2024", title: "MBA em Arquitetura Full Cycle", issuer: "Faculdade Bras√≠lia - FBr", category: "MBA", issueDate: "2024-12", expireDate: "", verifyUrl: "https://www.unicollege.com.br/u/o/i/o03/Validador.aspx", badgeUrl: "", logoUrl: "", skills: ["Arquitetura", "Full Cycle"], docs: [
          { label: "Certificado MBA (frente)", url: "https://www.unicollege.com.br/u/o/i/o03/Validador.aspx" }
        ] },
        { id: "POS-FBR-712", title: "P√≥s-Gradua√ß√£o Lato Sensu - Especialista", issuer: "Faculdade Bras√≠lia - FBr", category: "P√≥s-Gradua√ß√£o", issueDate: "2025-06", expireDate: "", verifyUrl: "https://www.unicollege.com.br/u/o/i/o03/Validador.aspx", badgeUrl: "", logoUrl: "", skills: ["Lato Sensu", "Especializa√ß√£o"], docs: [
          { label: "Registro da P√≥s-Gradua√ß√£o (verso)", url: "https://www.unicollege.com.br/u/o/i/o03/Validador.aspx" }
        ] }
      ];

      const $ = (s, el = document) => el.querySelector(s);
      const $$ = (s, el = document) => [...el.querySelectorAll(s)];
      const grid = $("#grid");
      const search = $("#search");
      const fCat = $("#filterCategory");
      const fIssuer = $("#filterIssuer");
      const sortBy = $("#sortBy");
      const statsPanel = $("#statsPanel");
      const hero = $(".hero");
      const heroGlow = $("#heroGlow");
      const reducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      let previousFocus = null;
      let orbTweens = [];

      gsap.registerPlugin(ScrollTrigger);

      const unique = (arr) => [...new Set(arr)].sort((a, b) => a.localeCompare(b, "pt-BR"));
      const byDateDesc = (a, b) => (b.issueDate || "").localeCompare(a.issueDate || "");
      const byDateAsc = (a, b) => (a.issueDate || "").localeCompare(b.issueDate || "");
      const byTitleAsc = (a, b) => a.title.localeCompare(b.title, "pt-BR");
      const fmtDate = (ym) => {
        if (!ym) return "";
        const [y, m] = ym.split("-");
        const ms = ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez"];
        return `${ms[(+m || 1) - 1]}/${y}`;
      };
      const isSafeUrl = (value) => {
        if (!value) return false;
        try {
          const u = new URL(value, window.location.origin);
          return u.protocol === "https:";
        } catch {
          return false;
        }
      };
      const makeQR = (url) => (isSafeUrl(url) ? `https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(url)}` : "");

      function setTheme(mode) {
        const isLight = mode === "light";
        if (isLight) {
          document.body.setAttribute("data-theme", "light");
        } else {
          document.body.removeAttribute("data-theme");
        }
        $("#btnLight").classList.toggle("active", isLight);
        $("#btnDark").classList.toggle("active", !isLight);
        $("#btnLight").setAttribute("aria-pressed", String(isLight));
        $("#btnDark").setAttribute("aria-pressed", String(!isLight));
        localStorage.setItem("theme", isLight ? "light" : "dark");
      }

      function createStatCard(item, idx) {
        const article = document.createElement("article");
        article.className = "stat";
        article.dataset.stat = String(idx);

        const strong = document.createElement("strong");
        strong.dataset.target = String(item.value);
        strong.textContent = "0";

        const span = document.createElement("span");
        span.textContent = item.label;

        article.append(strong, span);
        return article;
      }

      function renderStats(list = CERTS) {
        const valid = list.filter((c) => !!c.verifyUrl).length;
        const issuers = unique(list.map((c) => c.issuer).filter(Boolean)).length;
        const skills = unique(list.flatMap((c) => c.skills || [])).length;
        const newest = [...list].sort(byDateDesc)[0]?.issueDate || "";
        const items = [
          { label: "Credenciais", value: list.length },
          { label: "Com verifica√ß√£o", value: valid },
          { label: "Emissores", value: issuers },
          { label: `Skills (${fmtDate(newest) || "n/a"})`, value: skills }
        ];

        statsPanel.replaceChildren(...items.map((item, idx) => createStatCard(item, idx)));

        if (!reducedMotion) {
          $$(".stat strong").forEach((el) => {
            gsap.fromTo(el, { innerText: 0 }, {
              innerText: Number(el.dataset.target),
              duration: 1.1,
              ease: "power2.out",
              snap: { innerText: 1 },
              onUpdate() { el.innerText = String(Math.round(Number(el.innerText))); }
            });
          });

          animate(".stat", { opacity: [0, 1], y: [16, 0] }, { duration: .5, delay: stagger(.06), easing: "ease-out" });
        } else {
          $$(".stat strong").forEach((el) => { el.textContent = el.dataset.target || "0"; });
        }
      }

      function populateIssuerFilter() {
        const issuers = unique(CERTS.map((c) => c.issuer).filter(Boolean));
        issuers.forEach((i) => {
          const opt = document.createElement("option");
          opt.value = i;
          opt.textContent = i;
          fIssuer.appendChild(opt);
        });
      }

      const hit = (cert, term) => `${cert.title} ${cert.issuer} ${(cert.skills || []).join(" ")}`.toLowerCase().includes(term);

      function createImage(className, src, alt) {
        if (!isSafeUrl(src)) return null;
        const img = document.createElement("img");
        img.className = className;
        img.src = src;
        img.alt = alt;
        img.loading = "lazy";
        return img;
      }

      function createLink(className, href, text) {
        if (!isSafeUrl(href)) return null;
        const a = document.createElement("a");
        a.className = className;
        a.href = href;
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = text;
        return a;
      }

      function attachCardPhysics(card) {
        if (reducedMotion) return;
        const rotX = gsap.quickTo(card, "rotateX", { duration: .35, ease: "power3" });
        const rotY = gsap.quickTo(card, "rotateY", { duration: .35, ease: "power3" });
        const z = gsap.quickTo(card, "z", { duration: .35, ease: "power3" });

        card.addEventListener("mousemove", (e) => {
          const r = card.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width - .5;
          const y = (e.clientY - r.top) / r.height - .5;
          rotX(-y * 10);
          rotY(x * 10);
          z(35);
        });
        card.addEventListener("mouseleave", () => {
          rotX(0);
          rotY(0);
          z(0);
        });

        gsap.from(card, {
          opacity: 0,
          y: 50,
          duration: .8,
          ease: "power3.out",
          scrollTrigger: { trigger: card, start: "top 88%" }
        });

        const floatingBits = card.querySelectorAll(".badge, .qr, .chip");
        floatingBits.forEach((el, idx) => {
          animate(
            el,
            { y: [0, -4 - idx, 0], rotateZ: [0, idx % 2 ? -1 : 1, 0] },
            { duration: 2.4 + idx * .2, repeat: Infinity, easing: "ease-in-out", delay: idx * .05 }
          );
        });
      }

      function clearScrollTriggers() {
        ScrollTrigger.getAll().forEach((trigger) => trigger.kill());
      }

      function renderEmptyState() {
        const card = document.createElement("div");
        card.className = "card";
        const strong = document.createElement("strong");
        strong.textContent = "Nenhum item encontrado.";
        const p = document.createElement("p");
        p.className = "meta";
        p.textContent = "Ajuste os filtros ou pesquise por outro termo.";
        card.append(strong, p);
        grid.replaceChildren(card);
      }

      function renderCard(c) {
        const card = document.createElement("article");
        card.className = "card";

        const head = document.createElement("div");
        head.className = "card-head";
        const left = document.createElement("div");
        left.className = "left";
        const right = document.createElement("div");
        right.className = "right";

        const badge = createImage("badge", c.badgeUrl, "Badge");
        if (badge) left.appendChild(badge);

        const textWrap = document.createElement("div");
        const title = document.createElement("h3");
        title.className = "titleCert";
        title.textContent = c.title || "T√≠tulo indispon√≠vel";

        const issuer = document.createElement("div");
        issuer.className = "issuer";
        const logo = createImage("logo", c.logoUrl, "Logo");
        if (logo) issuer.appendChild(logo);
        const issuerName = document.createElement("span");
        issuerName.textContent = c.issuer || "‚Äî";
        issuer.appendChild(issuerName);

        const meta = document.createElement("div");
        meta.className = "meta";
        const parts = [];
        if (fmtDate(c.issueDate)) parts.push(`Emitido: ${fmtDate(c.issueDate)}`);
        if (fmtDate(c.expireDate)) parts.push(`Expira: ${fmtDate(c.expireDate)}`);
        if (c.id) parts.push(`ID: ${c.id}`);
        meta.textContent = parts.join(" ‚Ä¢ ");

        textWrap.append(title, issuer, meta);
        left.appendChild(textWrap);

        const qr = createImage("qr", makeQR(c.verifyUrl), "QR de verifica√ß√£o");
        if (qr) right.appendChild(qr);

        head.append(left, right);
        card.appendChild(head);

        if (c.skills?.length) {
          const chips = document.createElement("div");
          chips.className = "chips";
          c.skills.forEach((s) => {
            const chip = document.createElement("span");
            chip.className = "chip";
            chip.textContent = s;
            chips.appendChild(chip);
          });
          card.appendChild(chips);
        }

        if (c.docs?.length) {
          const docs = document.createElement("ul");
          docs.className = "card-docs";
          c.docs.forEach((d) => {
            const item = document.createElement("li");
            const link = createLink("", d.url, d.label || "Documento");
            if (link) item.appendChild(link);
            docs.appendChild(item);
          });
          card.appendChild(docs);
        }

        const actions = document.createElement("div");
        actions.className = "card-actions";
        const verifyLink = createLink("verify primary", c.verifyUrl, "Verificar credencial");
        const badgeLink = createLink("verify", c.badgeUrl, "Abrir badge");
        if (verifyLink) actions.appendChild(verifyLink);
        if (badgeLink) actions.appendChild(badgeLink);
        card.appendChild(actions);

        attachCardPhysics(card);
        return card;
      }

      function render() {
        clearScrollTriggers();
        let list = [...CERTS];
        const term = (search.value || "").trim().toLowerCase();
        if (term) list = list.filter((c) => hit(c, term));
        if (fCat.value) list = list.filter((c) => c.category === fCat.value);
        if (fIssuer.value) list = list.filter((c) => c.issuer === fIssuer.value);
        const sorter = ({ dateDesc: byDateDesc, dateAsc: byDateAsc, titleAsc: byTitleAsc }[sortBy.value]) || byDateDesc;
        list.sort(sorter);

        if (!list.length) {
          renderEmptyState();
          return;
        }

        const cards = list.map((c) => renderCard(c));
        grid.replaceChildren(...cards);

        if (!reducedMotion) {
          animate(
            ".card",
            { opacity: [0, 1], y: [22, 0], scale: [.96, 1] },
            { duration: .65, delay: stagger(.07), easing: spring({ stiffness: 260, damping: 22 }) }
          );
          animate(".card .chip", { opacity: [0, 1], scale: [.9, 1] }, { duration: .35, delay: stagger(.04), easing: "ease-out" });
        }
        renderStats(list);
      }

      function addHeroSpotlight() {
        if (reducedMotion) return;
        const xTo = gsap.quickTo(heroGlow, "x", { duration: .25, ease: "power2.out" });
        const yTo = gsap.quickTo(heroGlow, "y", { duration: .25, ease: "power2.out" });
        const rotY = gsap.quickTo(hero, "rotateY", { duration: .45, ease: "power3.out" });
        const rotX = gsap.quickTo(hero, "rotateX", { duration: .45, ease: "power3.out" });

        hero.addEventListener("mousemove", (e) => {
          const r = hero.getBoundingClientRect();
          xTo(e.clientX - r.left);
          yTo(e.clientY - r.top);
          gsap.to(heroGlow, { opacity: .95, duration: .2, overwrite: true });
          rotY(((e.clientX - r.left) / r.width - .5) * 4);
          rotX(-((e.clientY - r.top) / r.height - .5) * 4);
        });

        hero.addEventListener("mouseleave", () => {
          gsap.to(heroGlow, { opacity: 0, duration: .3, overwrite: true });
          rotX(0);
          rotY(0);
        });
      }

      function addScrollProgress() {
        if (reducedMotion) return;
        gsap.to("#scrollProgress", {
          scaleX: 1,
          ease: "none",
          scrollTrigger: {
            trigger: document.body,
            start: "top top",
            end: "bottom bottom",
            scrub: true
          }
        });
      }

      function addMicroInteractions() {
        if (!reducedMotion) {
          animate(".hero", { opacity: [0, 1], y: [28, 0], scale: [.98, 1] }, { duration: .8, easing: "ease-out" });
          animate(".filters", { opacity: [0, 1], y: [20, 0] }, { duration: .75, delay: .14, easing: "ease-out" });
          animate("h1", { opacity: [0, 1], y: [14, 0], letterSpacing: ["0.06em", "0em"] }, { duration: .9, easing: "ease-out" });
          animate(".subtitle", { opacity: [0, 1], x: [-18, 0] }, { duration: .8, delay: .18, easing: "ease-out" });
          orbTweens = [
            gsap.to(".orb.one", { x: 80, y: 34, duration: 10, yoyo: true, repeat: -1, ease: "sine.inOut" }),
            gsap.to(".orb.two", { x: -70, y: -25, duration: 11, yoyo: true, repeat: -1, ease: "sine.inOut" }),
            gsap.to(".orb.three", { x: -38, y: -56, duration: 9, yoyo: true, repeat: -1, ease: "sine.inOut" })
          ];

          gsap.timeline({ defaults: { ease: "power3.out" } })
            .from(".avatar", { scale: .75, opacity: 0, duration: .55 }, 0)
            .from(".toolbar .btn, .toolbar .switch", { y: -16, opacity: 0, stagger: .07, duration: .45 }, .15)
            .from(".filters .input, .filters select", { y: 16, opacity: 0, stagger: .06, duration: .4 }, .2);
        }

        $$(".btn, .verify").forEach((el) => {
          const xTo = gsap.quickTo(el, "x", { duration: .25, ease: "power2.out" });
          const yTo = gsap.quickTo(el, "y", { duration: .25, ease: "power2.out" });
          el.addEventListener("mousemove", (e) => {
            if (reducedMotion) return;
            const r = el.getBoundingClientRect();
            xTo((e.clientX - (r.left + r.width / 2)) * .12);
            yTo((e.clientY - (r.top + r.height / 2)) * .12);
          });
          el.addEventListener("mouseleave", () => { xTo(0); yTo(0); });
        });
      }

      const avatarImg = $("#avatarImg");
      const zoomOverlay = $("#zoomOverlay");
      function closeDialog() {
        zoomOverlay.classList.remove("open");
        zoomOverlay.setAttribute("aria-hidden", "true");
        if (previousFocus) previousFocus.focus();
      }
      function openDialog() {
        previousFocus = document.activeElement;
        zoomOverlay.classList.add("open");
        zoomOverlay.setAttribute("aria-hidden", "false");
        zoomOverlay.focus();
        if (!reducedMotion) animate("#zoomOverlay img", { scale: [.92, 1], opacity: [.4, 1] }, { duration: .35, easing: "ease-out" });
      }

      avatarImg.addEventListener("click", openDialog);
      avatarImg.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openDialog();
        }
      });

      zoomOverlay.addEventListener("click", (e) => {
        if (e.target === zoomOverlay) closeDialog();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && zoomOverlay.classList.contains("open")) {
          closeDialog();
        }
      });

      $("#btnLight").addEventListener("click", () => setTheme("light"));
      $("#btnDark").addEventListener("click", () => setTheme("dark"));
      $("#btnPrint").addEventListener("click", () => window.print());
      [search, fCat, fIssuer, sortBy].forEach((el) => el.addEventListener("input", render));

      const LINKEDIN = "https://www.linkedin.com/in/david-fernandes-08b005b4/";
      const btnLinkedIn = $("#btnLinkedIn");
      if (!isSafeUrl(LINKEDIN)) btnLinkedIn.classList.add("hidden"); else btnLinkedIn.href = LINKEDIN;

      (function init() {
        const saved = localStorage.getItem("theme");
        setTheme(saved || "dark");
        populateIssuerFilter();
        addScrollProgress();
        addHeroSpotlight();
        addMicroInteractions();
        render();
      })();
    </script>
  </body>
</html>
